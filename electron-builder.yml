appId: com.wawisync.app
productName: WAWISync
copyright: Copyright © 2025

# Setze "type": "module" nur für Electron im Build-Prozess
extraMetadata:
  type: module

directories:
  buildResources: build
  output: dist

files:
  # Next.js statischer Export
  - "out/**/*"
  # Kompilierte Electron-Dateien (nur dist, nicht Quellen)
  - "electron/dist/**/*"
  # Package.json für Electron
  - "package.json"
  # Nur benötigte node_modules (Runtime Dependencies)
  - "!node_modules/**/*"
  - "node_modules/better-sqlite3/**/*"
  - "node_modules/electron-store/**/*"
  - "node_modules/winston/**/*"
  - "node_modules/axios/**/*"
  - "node_modules/csv-parse/**/*"
  - "node_modules/iconv-lite/**/*"
  - "node_modules/zod/**/*"
  # Exclude
  - "!node_modules/.cache"
  - "!electron/**/*.ts"
  - "!electron/**/*.tsbuildinfo"
  - "!core/**/*.ts"
  - "!core/**/*.tsbuildinfo"
  - "!**/*.map"
  - "!tests"
  - "!scripts"
  - "!docs"
  - "!*.md"
  - "!tsconfig*.json"
  - "!vitest.config.ts"

win:
  target:
    - nsis
    - portable
  icon: build/icon.ico
  # Code-Signing: wird automatisch aktiviert, wenn CSC_LINK Umgebungsvariable gesetzt ist
  signingHashAlgorithms:
    - sha256

mac:
  target:
    - dmg
    - zip
  icon: build/icon.icns
  category: public.app-category.business

linux:
  target:
    - AppImage
    - deb
  icon: build/icon.png
  category: Office

nsis:
  oneClick: false
  allowToChangeInstallationDirectory: true
  createDesktopShortcut: always
  createStartMenuShortcut: true

# Optional: ASAR deaktivieren, falls Pfadprobleme auftreten
# asar: false

