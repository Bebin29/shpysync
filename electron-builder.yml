appId: com.wawisync.app
productName: WAWISync
copyright: Copyright © 2025

# Electron-Version explizit setzen (muss mit package.json devDependencies übereinstimmen)
electronVersion: 28.2.0

# Setze "type": "module" nur für Electron im Build-Prozess
extraMetadata:
  type: module

directories:
  buildResources: build
  output: dist

files:
  # Next.js statischer Export
  - "out/**/*"
  # Kompilierte Electron-Dateien (nur dist, nicht Quellen)
  - "electron/dist/**/*"
  # Package.json für Electron
  - "package.json"
  # Alle Production Dependencies automatisch einschließen
  # (electron-builder analysiert package.json und schließt alle Dependencies ein)
  - "node_modules/**/*"
  # Dev-Dependencies ausschließen (nur Build-Tools)
  - "!node_modules/@types/**/*"
  - "!node_modules/typescript/**/*"
  - "!node_modules/vitest/**/*"
  - "!node_modules/@vitest/**/*"
  - "!node_modules/eslint/**/*"
  - "!node_modules/prettier/**/*"
  - "!node_modules/autoprefixer/**/*"
  - "!node_modules/postcss/**/*"
  - "!node_modules/tailwindcss/**/*"
  - "!node_modules/concurrently/**/*"
  - "!node_modules/cross-env/**/*"
  - "!node_modules/wait-on/**/*"
  - "!node_modules/tsc-esm-fix/**/*"
  - "!node_modules/electron-builder/**/*"
  - "!node_modules/electron/**/*"
  # Exclude
  - "!node_modules/.cache"
  - "!electron/**/*.ts"
  - "!electron/**/*.tsbuildinfo"
  - "!core/**/*.ts"
  - "!core/**/*.tsbuildinfo"
  - "!**/*.map"
  - "!tests"
  - "!scripts"
  - "!docs"
  - "!*.md"
  - "!tsconfig*.json"
  - "!vitest.config.ts"

win:
  target:
    - nsis
    - portable
  icon: build/icon.ico
  # Code-Signing: wird automatisch aktiviert, wenn CSC_LINK Umgebungsvariable gesetzt ist
  signingHashAlgorithms:
    - sha256

mac:
  target:
    - dmg
    - zip
  icon: build/icon.icns
  category: public.app-category.business

linux:
  target:
    - AppImage
    - deb
  icon: build/icon.png
  category: Office

nsis:
  oneClick: false
  allowToChangeInstallationDirectory: true
  createDesktopShortcut: always
  createStartMenuShortcut: true

# Optional: ASAR deaktivieren, falls Pfadprobleme auftreten
# TEMPORÄR DEAKTIVIERT: Test für ES Module Export-Problem
asar: false

# Update-Konfiguration für GitHub Releases
publish:
  provider: github
  owner: Bebin29
  repo: shpysync
  private: false  # Repository ist öffentlich

